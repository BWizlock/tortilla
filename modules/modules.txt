Модули, которые подключаются в Lua:
------------------------------------------------------------------------------------------------------------
system - модуль системных методов:
void system.sleep(number ms) - засыпание потока на заданное количество мс.
void system.dbglog(string [,number|string|boolean)) - Выводит лог-информацию в отладчик посредством OutputDebugString.
int system.msgbox([string caption,] string text [,string buttons_and_icons] ) - Отображение окна с текстом
(+заголовок, +иконка и кнопки).
Кнопки: 
- ok,cancel - по умолчанию ok (первая кнопка)
- cancel,ok 
- yes,no
- no,yes
Иконки: error,stop,info,information,warning,question

table system.loadTextFile(filepath) - загружает текстовый файл в таблицу отдельными строками. 
Индексы строк начинаютя от 1. Возвращает nul, если файл прочитать не удалось. Непечатаемые символы 
с кодом до 32 (кроме \r\n) заменяются на пробелы.
string system.convertFromWin(string) - конвертация строки из win-кодировки(ansi) в utf8-кодировку
string system.convertToWin(string) - конвертация из utf8-кодировки в win-кодировку
void system.beep(int freq, int duration) - проигрывание звука заданной частоты и длительности
------------------------------------------------------------------------------------------------------------
rnd - генератор случайных чисел и строк
void rnd.seed(uint seed) - сброс ключа генератора на другое значение.
int  rnd.rand(int min, int max) - генерация случайного числа в рамках min,max включительно.
uint rnd.uint() - генерация случайного целого беззнакового числа.
float rnd.float() - генерация случайного веществественного числа [0 <= rnd < 1]
string rnd.string([int min], int max) - генерация случайной строки длиной от 0(min) до max символов.
------------------------------------------------------------------------------------------------------------
lbass - модуль луа-обвязки звукового движка bass
bool init() - инициализация. Нужно вызвать один раз, после загрузки, перед первым использованием.
void free() - выгрузка bass. Освобождение всех ресурсов. Нужно вызвать при завершении работы.
int loadSample(file) - загрузка файла целиком в память компьютера как звукового сэмпла. Предназначен для звуковых
эффектов. Возвращает идентификатор, с помощью которого дальше происходит работа с этим сэмплом.
int loadStream(file) - загрузка файла как стрим-файла (поток). Этот файл будет во время проигрывания подкачиваться с диска
компьютера по мере надобности. Рассчитан на воспроизведение фоновой музыки. Возвращает идентификатор для дальнейшей 
работы со этим звуком.
bool unload(int id) - выгрузка из памяти компьютера звукового файла и все информацией, связанной с ним. Нужно передать 
идентификатор.
bool isHandle(int id) - проверка, что есть такой звук, с заданным идентификатором.
bool isSample(int id) - проверка по идентификатору - звуковой сэмпл это или поток.
bool play(int id[, int volume [, function endplaying]]) - воспроизводит звук. Нужно указать идентификатор и громкость.
Громкость изменряется в процентах от 0 до 100 (это индивидуальная для данного звука громкость). 
Можно указать луа-функцию, которая будет вызвана, если звук завершил проигрыш, но это работает только для поточных звуков.
bool isPlaying(int id) - проверка - звучит в данный момент звук или нет. Нужно передать идентификатор.
string getPath(int id) - возвращает путь к файлу по идентификатору.
bool stop(int id) - остановливает воспроизведение звука.
void stopAll() - останавливает воспроизведение всех звуков.
void setVolume(int v) - задает мастер-громкость всех звуков. Для каждого звука может быть задана своя громкость.
int  getVolume() - возвращает текущую мастер-громкость.
void setRecord(string param, int value) - задает параметры для записи звука с микрофона. 
Варианты freq - частота, channels - колво каналов.
bool canRecord() - проверяет, что запись возможна (проверяет наличие микрофона на компьютере).
bool startRecord(string file) - запускат запись звука с микрофона в заданный файл. Запись идет в формате wav.
bool stopRecord() - останавливает запись звука.
------------------------------------------------------------------------------------------------------------
soundplayer - модуль для воспроизведения звуковых эффектов и музыки. Использует модуль lbass.
Рекомендуется использовать данный модуль, а на lbass напрямую.
setVolume(int v) - устанавливает мастер-громкость.
int getVolume() - возвращает текущую мастер-громкость.
int playfx(string file [, int volume]) - проигрывает звуковой эффект сэмпл из файла с нужной громкостью. 
Возвращает идентификатор сэмпла. Предназначен для звуковых эффектов.
int play(string file [, int volume]) - проигрывает мелодию из файла с нужной громкостью. Возвращает 
идентификатор. Предназначен для воспроизведения фоновой музыки. Может проигрываться только один музыкальный файл.
int playlist(table t[, int volume]) - проигрывает плейлист (список звуковых файлов) по кругу как музыкальные файлы.
void stop(int id) - останавливает проигрыш звука. Нужно указать идентификатор звукового файла.
void stopAll() - останавливает проигрыш всех звуковых файлов.
bool startRecord(string file) - запускат запись звука с микрофона в заданный файл. Запись идет в формате wav.
void stopRecord() - останавливает запись звука.
------------------------------------------------------------------------------------------------------------
lvoice(voice.dll) - модуль для воспроизведения речи через программный интерфейс SAPI5.
init() - инициализация
release() - выгрузка модуля, освобождение ресурсов
bool speak(string) - прочитать текст
void stop() - остановить чтение текста
int getVolume() - текущая громкость
bool setVolume(int) - задать громкость [0,100]
int getRate() - текущий темп речи
bool setRate(int) - задать темп речи [-10,10]
table getVoices() - таблица с установленными голосами на компьютере
bool selectVoice(int) - выбрать текущий голос
------------------------------------------------------------------------------------------------------------
extra - модуль для работы с падежами предментов и базой предметов.
extra.declension() - Сохраняет словарь слов/словосочетаний в именительном падеже. Их нужно добавлять программно во время игры.
Далее ищет именительный падеж по другим падежам. Если именительный падеж найден то возвращает его.
По сути данная библиотека - с автообучением.
Также умеет сравнивать строки без учета падежей. Механизм сравненения не протестирован до конца, но работает пока.
Рассчитана на работу с именами предметов, объектов чтобы их использовать в какой либо базе.

нужно сначала создать экземпляр словаря:
local d = extra.declension()

далее использовать
bool d:add(string) - добавление строки в словарь. Обязательно в именительном падеже.
string d:find(string) - ищет строку в именительном падеже по исходной строке (в другом падеже), nil - если не найдена
bool d:load(filepath) - загрузка базы из файла
bool d:save(filepath) - запись базы в файл
void d:clear() - очистка базы
bool d:compare(string1, string2) - сравнение двух строк на совпадение без падежей. с базой не работает
bool d:check(string, int index) - проверка что по данному индексу находится нужная строка. используется для юнит-тестов
bool d:remove(string) - удаление из базы фразы. Удаление происходит только если есть единственное совпадение! 
Т.е. нужно указывать полную строку (в именительном падеже конечно же).
local d = extra.dictonary(string path) - словарь. Позволяет добавлять чтото по имени и потом искать по сокращенному имени.
нужно указать каталог, где будут храниться файлы БД словаря.
d:add(string name, string data) - добавляет в словарь данные по имени.
table d:find(string name) - ищет в словаре по имени (в т.ч. сокращенному).
d:wipe() - удаляет всю базу словаря со всеми файлами! Осторожно! эта функция предназначена в основном для юнит тестов.
